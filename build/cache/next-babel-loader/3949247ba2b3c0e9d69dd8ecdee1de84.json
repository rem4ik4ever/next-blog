{"ast":null,"code":"import AWS from \"aws-sdk\";\n\nconst signS3Upload = async ({\n  filename,\n  filetype\n}) => {\n  try {\n    const s3 = new AWS.S3({\n      signatureVersion: \"v4\",\n      region: \"us-east-2\",\n      accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n      secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY\n    });\n    const s3Parms = {\n      Bucket: process.env.S3_BUCKET,\n      Key: filename,\n      Expires: 60,\n      ContentType: filetype,\n      ACL: \"public-read\"\n    };\n    const signedRequest = await s3.getSignedUrl(\"putObject\", s3Parms);\n    const url = `https://${process.env.S3_BUCKET}.s3.amazonaws.com/${filename}`;\n    return {\n      signedRequest,\n      url\n    };\n  } catch (error) {\n    console.error(\"AWS ERR: \", error.message);\n    return null;\n  }\n};\n\nexport default signS3Upload;","map":null,"metadata":{},"sourceType":"module"}