{"ast":null,"code":"import { v4 } from \"uuid\";\nimport devonlyMiddleware from \"src/middlewares/devonly.middleware\";\nimport utilities from \"src/utilities\";\n\nconst uploadFile = async (req, res) => {\n  try {\n    await devonlyMiddleware(req, res);\n    const {\n      name,\n      filetype,\n      size,\n      url\n    } = req.body;\n    const id = v4();\n    let file = {\n      name,\n      filetype,\n      size,\n      url,\n      id,\n      createdAt: new Date().toISOString()\n    };\n    utilities.Files.writeJSONToFile(\"./data/assets\", file);\n    res.statusCode = 200;\n    res.end(JSON.stringify(file));\n  } catch (error) {\n    res.statusCode = 500;\n    res.end();\n  }\n};\n\nconst listFiles = async (_, res) => {\n  try {\n    const files = utilities.Files.allFiles();\n    res.statusCode = 200;\n    res.end(JSON.stringify(files));\n  } catch (error) {\n    res.statusCode = 404;\n    res.end();\n  }\n};\n\nconst files = async (req, res) => {\n  if (req.method === \"POST\") {\n    await uploadFile(req, res);\n  } else {\n    await listFiles(req, res);\n  }\n};\n\nexport default files;","map":null,"metadata":{},"sourceType":"module"}